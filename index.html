<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tony Komforty | Frontend Developer & Creative Coder</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* --- Modern Minimal Black Theme --- */

        /* Variables */
        :root {
            --background-color: #000000; /* Pure Black */
            --card-color: #111111;      /* Very Dark Gray for cards/sections */
            --card-hover-color: #1a1a1a; /* Slightly lighter card hover */
            --text-color: #E0E0E0;      /* Light Gray/Off-White for readability */
            --text-secondary-color: #AAAAAA; /* Dimmer text */
            --accent-color: #00FFFF;    /* Bright Cyan/Aqua */
            --accent-hover-color: #29D6D6; /* Slightly darker cyan for hover */
            --border-color: rgba(255, 255, 255, 0.1); /* Subtle white border */
            --shadow-color: rgba(0, 255, 255, 0.1); /* Subtle cyan shadow */
            --transition: all 0.3s ease-in-out;
            --carousel-transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* Carousel rotation transition */
            --max-width: 1200px;
            --header-height: 60px;
            --border-radius: 8px; /* Consistent border radius */

            /* --- NEW: Card Dimensions --- */
            --card-width: 360px;
            --card-height: 500px; /* Increased height */
            --card-visual-height: 200px; /* Height for image area */
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px; /* Base font size */
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.7; /* Increased line-height for readability */
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased; /* Smoother fonts */
            -moz-osx-font-smoothing: grayscale;
        }

        .container {
            max-width: var(--max-width);
            margin: 0 auto;
            padding: 0 25px; /* Slightly increased padding */
            position: relative;
            box-sizing: border-box;
        }

        a {
            text-decoration: none;
            color: var(--accent-color);
            transition: var(--transition);
        }

        a:hover {
            color: var(--accent-hover-color);
        }

        img, canvas { /* Ensure images/canvases are responsive */
            max-width: 100%;
            height: auto;
            display: block;
        }

        /* Header */
        header {
            position: fixed;
            width: 100%;
            top: 0;
            left: 0;
            z-index: 1000;
            background-color: rgba(0, 0, 0, 0.75); /* Semi-transparent black */
            backdrop-filter: blur(10px); /* Stronger blur */
            border-bottom: 1px solid var(--border-color); /* Bottom border only */
            height: var(--header-height);
            transition: background-color 0.3s ease;
        }

        .header-container {
            max-width: var(--max-width);
            margin: 0 auto;
            padding: 0 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 100%;
        }

        .logo {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--text-color); /* White logo */
            letter-spacing: -0.5px; /* Slightly tighter spacing */
        }
        .logo span { /* Style the accent part if you add one */
            color: var(--accent-color);
        }


        nav ul {
            display: flex;
            list-style: none;
            gap: 2.5rem; /* Increased gap */
        }

        nav a {
            color: var(--text-secondary-color); /* Dimmer nav links */
            font-weight: 500;
            position: relative;
            padding: 0.5rem 0;
            font-size: 0.95rem;
        }

        nav a:hover, nav a.active-link /* Style for hover and potential active state */ {
            color: var(--text-color); /* Brighten on hover */
        }

        /* Removed underline hover, keeping it minimal */

        .mobile-menu {
            display: none;
            font-size: 1.6rem;
            cursor: pointer;
            color: var(--text-color);
            width: 44px;
            height: 44px;
            justify-content: center;
            align-items: center;
        }
        .mobile-menu i { display: block; }

        /* Hero Section */
        .hero {
            min-height: 100vh; /* Full viewport height */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
            padding: var(--header-height) 25px 50px; /* Adjust padding */
            text-align: center;
            margin-top: 0; /* Remove top margin */
        }

        #hero-canvas-container { /* Renamed for clarity */
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            /* Optional: Add gradient overlay for text contrast */
            /* background: linear-gradient(to bottom, rgba(0,0,0,0.1), rgba(0,0,0,0.7)); */
        }
         /* Ensure canvas inside container fills it */
        #hero-canvas-container canvas {
            width: 100% !important;
            height: 100% !important;
        }


        .hero-content {
            z-index: 1;
            position: relative;
            max-width: 800px; /* Limit content width */
            margin: 0 auto;
        }

        .hero h1 {
            font-size: clamp(2.5rem, 6vw, 4rem); /* Responsive font size */
            margin-bottom: 1.5rem;
            line-height: 1.2;
            font-weight: 700;
            letter-spacing: -1px;
            text-shadow: 0 2px 15px rgba(0, 0, 0, 0.5); /* Subtle text shadow */
        }
        .hero h1 span { /* Accent color for name/role */
             color: var(--accent-color);
        }


        .hero p.subtitle { /* Added class for subtitle */
            font-size: clamp(1rem, 2.5vw, 1.25rem);
            margin-bottom: 2.5rem;
            color: var(--text-secondary-color);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-btns {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
        }

        /* Modern Button Styles */
        .btn {
            padding: 0.9rem 2.2rem;
            border-radius: 50px; /* Pill shape */
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent; /* Base border */
            font-size: 1rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            min-height: 48px;
            line-height: 1; /* Ensure text aligns vertically */
        }

        .btn-primary { /* Accent button */
            background-color: var(--accent-color);
            color: var(--background-color); /* Black text on accent */
            border-color: var(--accent-color);
        }
        .btn-primary:hover {
            background-color: var(--accent-hover-color);
            border-color: var(--accent-hover-color);
            transform: translateY(-3px);
            box-shadow: 0 4px 15px var(--shadow-color);
        }

        .btn-secondary { /* Outline button */
            background-color: transparent;
            color: var(--accent-color);
            border-color: var(--accent-color);
        }
        .btn-secondary:hover {
            background-color: var(--accent-color);
            color: var(--background-color);
            transform: translateY(-3px);
            box-shadow: 0 4px 15px var(--shadow-color);
        }

        /* --- Section Styles --- */
        section {
            padding: 6rem 0; /* Generous padding */
            overflow: hidden; /* Prevent content overflow issues */
            scroll-margin-top: var(--header-height); /* Offset for fixed header */
        }

        .section-container {
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 3rem; /* Generous padding inside container */
            background-color: var(--card-color);
            box-shadow: 0 8px 40px rgba(0, 0, 0, 0.3); /* Soft shadow */
            margin-bottom: 3rem; /* Space between containers if needed */
            width: 100%;
            box-sizing: border-box;
        }

        .section-title {
            font-size: clamp(1.8rem, 5vw, 2.5rem); /* Responsive title */
            font-weight: 700;
            margin-bottom: 3rem; /* Increased margin */
            text-align: center;
            position: relative;
            color: var(--text-color);
        }
         /* Minimal underline for title */
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -15px; /* Position below text */
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 3px;
            background-color: var(--accent-color);
            border-radius: 2px;
        }

        /* About Section */
        .about-layout { /* Renamed for clarity */
            display: grid;
            grid-template-columns: 1fr 1.2fr; /* Adjust column ratio if needed */
            gap: 4rem;
            align-items: center; /* Vertically align grid items */
        }

        #about-image-container { /* Container for the NEW generative sketch */
            width: 100%;
            max-width: 450px; /* Max width for image container */
            margin: 0 auto; /* Center if grid column is wider */
            border-radius: var(--border-radius);
            overflow: hidden;
            background-color: #050505; /* Darker placeholder background */
            min-height: 300px; /* Ensure minimum height */
            aspect-ratio: 1 / 1; /* Make it square-ish or adjust as needed */
            position: relative; /* Needed for canvas positioning */
             border: 1px solid var(--border-color);
        }
        /* Ensure canvas fills the container */
        #about-image-container canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100% !important;
            height: 100% !important;
            object-fit: cover; /* Ensure canvas content covers */
        }

        .about-content p {
            margin-bottom: 1.5rem;
            color: var(--text-secondary-color); /* Use secondary text color */
        }
        .about-content p:last-of-type {
            margin-bottom: 0;
        }

        .skills {
            display: flex;
            flex-wrap: wrap;
            justify-content: flex-start; /* Align skills to start */
            gap: 0.8rem;
            margin-top: 2.5rem;
        }

        .skill-tag {
            background-color: rgba(0, 255, 255, 0.1); /* Transparent accent */
            color: var(--accent-color);
            padding: 0.5rem 1.2rem;
            border-radius: 50px; /* Pill shape */
            font-size: 0.85rem;
            font-weight: 500;
            transition: var(--transition);
            border: 1px solid rgba(0, 255, 255, 0.3); /* Accent border */
            cursor: default; /* Indicate non-interactive */
        }

        .skill-tag:hover { /* Subtle hover */
            background-color: rgba(0, 255, 255, 0.2);
            transform: translateY(-2px);
        }


        /* --- Portfolio Section (Carousel Layout) --- */
        .portfolio-intro {
            text-align: center;
            max-width: 700px;
            margin: 0 auto 4rem; /* Keep intro */
        }

        .portfolio-intro p {
            color: var(--text-secondary-color);
            margin-top: 1rem;
        }

        /* Scene container for 3D perspective */
        .carousel-scene {
            position: relative;
            width: 100%;
            max-width: var(--card-width); /* Scene width based on card width */
            height: calc(var(--card-height) + 50px); /* Adjust height for perspective */
            margin: 3rem auto; /* Center the scene */
            perspective: 1500px; /* Increased perspective for larger cards */
        }

        /* Carousel container that rotates */
        .portfolio-carousel {
            width: 100%;
            height: 100%;
            position: absolute;
            transform-style: preserve-3d;
            transition: var(--carousel-transition);
            /* transform: translateZ(-var(--carousel-radius)) rotateY(0deg); */ /* Initial state set by JS */
        }

        /* Individual cards within the carousel */
        .portfolio-card {
            position: absolute;
            width: var(--card-width);   /* Use variable */
            height: var(--card-height); /* Use variable */
            left: 50%;
            top: 50%;
            /* Use calc() for dynamic centering based on variables */
            margin-left: calc(var(--card-width) / -2);
            margin-top: calc(var(--card-height) / -2);

            background-color: var(--card-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            backface-visibility: hidden;
            transition: opacity 0.3s ease, border-color 0.3s ease; /* Smoother transitions */
            /* transform set by JS */
        }

        .portfolio-card:hover {
             border-color: rgba(0, 255, 255, 0.5);
        }

        .portfolio-card:not(.is-front) {
            opacity: 0.6; /* Dim non-front cards more */
             pointer-events: none;
        }
        .portfolio-card.is-front {
            opacity: 1;
            border-color: rgba(0, 255, 255, 0.5);
             pointer-events: auto;
        }


        .card-visual {
            height: var(--card-visual-height); /* Use variable */
            flex-shrink: 0;
            background-color: #080808; /* Dark fallback background */
            border-bottom: 1px solid var(--border-color);
            position: relative; /* For positioning image */
            overflow: hidden;
        }

        .card-visual img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover; /* Cover the area, might crop */
            transition: transform 0.4s ease;
        }
        .portfolio-card:hover .card-visual img {
             transform: scale(1.05); /* Subtle zoom on hover */
        }


        .card-content {
            padding: 1.5rem; /* Increased padding */
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .card-content h3 {
            font-size: 1.4rem; /* Larger title */
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--text-color);
        }

        .card-content p {
            font-size: 1rem; /* Larger text */
            color: var(--text-secondary-color);
            margin-bottom: 1rem;
            flex-grow: 1;
        }

        .card-tech {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .card-tech span {
            padding: 0.3rem 0.8rem;
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            color: var(--text-secondary-color);
            border-radius: 50px;
            font-size: 0.8rem; /* Slightly larger tags */
            font-weight: 500;
        }

        .btn-card-link {
            padding: 0.7rem 1.6rem; /* Slightly larger button */
            font-size: 0.9rem;
            align-self: flex-start;
            background-color: transparent;
            color: var(--accent-color);
            border-color: var(--accent-color);
             margin-top: auto;
        }
        .btn-card-link:hover {
             background-color: var(--accent-color);
             color: var(--background-color);
             transform: none;
             box-shadow: none;
        }

        /* Carousel Navigation Buttons */
        .carousel-nav {
            position: absolute;
            top: calc(var(--card-visual-height) / 2); /* Vertically align with visual center */
            transform: translateY(-50%);
            z-index: 10;
            background-color: rgba(30, 30, 30, 0.7);
            color: var(--accent-color);
            border: 1px solid var(--border-color);
            border-radius: 50%;
            width: 48px; /* Slightly larger */
            height: 48px; /* Slightly larger */
            font-size: 1.3rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }
        .carousel-nav:hover {
            background-color: rgba(0, 255, 255, 0.2);
            color: var(--text-color);
        }
        .carousel-nav.prev {
            left: -70px; /* Position further out for larger cards */
        }
        .carousel-nav.next {
            right: -70px; /* Position further out for larger cards */
        }
        /* --- End Portfolio Section --- */


        /* Contact Section */
        .contact-form-element { /* Style for the form itself */
            max-width: 650px; /* Slightly narrower form */
            margin: 3rem auto 0;
            text-align: center;
        }

        .form-group {
            margin-bottom: 1.8rem;
            text-align: left;
        }

        label {
            display: block;
            margin-bottom: 0.6rem;
            font-weight: 500;
            font-size: 0.9rem;
            color: var(--text-secondary-color);
        }

        input[type="text"],
        input[type="email"],
        textarea {
            width: 100%;
            padding: 1rem 1.2rem;
            background-color: var(--card-color); /* Dark input background */
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            color: var(--text-color);
            font-family: inherit;
            font-size: 1rem;
            transition: var(--transition);
            min-height: 50px; /* Ensure min height */
        }
        textarea {
            min-height: 150px;
            resize: vertical;
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        textarea:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(0, 255, 255, 0.2); /* Accent focus ring */
            background-color: #1A1A1A; /* Slightly lighter on focus */
        }

        #contact-form button[type="submit"] { /* Specific styling for submit */
            /* Use existing btn styles */
            margin-top: 1rem; /* Space above button */
        }

        #form-status {
            margin-top: 1.5rem;
            text-align: center;
            min-height: 1.5em;
            font-weight: 500;
        }

        /* Footer */
        footer {
            background-color: var(--card-color); /* Use card color */
            padding: 2.5rem 0;
            text-align: center;
            margin-top: 6rem; /* Increased margin */
            border-top: 1px solid var(--border-color);
        }

        .copyright {
            color: var(--text-secondary-color);
            font-size: 0.9rem;
        }

        /* Fade-in Animation */
        @keyframes fadeInSection {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in-section { /* Class added by JS */
            animation: fadeInSection 0.8s ease-out forwards;
            opacity: 0; /* Start hidden */
        }


        /* --- Responsive Design --- */

        @media (max-width: 992px) {
            /* Adjust card variables for medium screens */
             :root {
                --card-width: 320px;
                --card-height: 460px;
                --card-visual-height: 180px;
             }
            .carousel-scene {
                 max-width: var(--card-width);
                 height: calc(var(--card-height) + 40px);
                 perspective: 1100px;
            }
             .carousel-nav.prev { left: -50px; }
             .carousel-nav.next { right: -50px; }


            .about-layout {
                grid-template-columns: 1fr; /* Stack columns */
                gap: 3rem;
            }
            #about-image-container {
                 margin-bottom: 0; max-width: 100%; max-height: 450px; aspect-ratio: 16 / 9;
            }
            .section-container { padding: 2.5rem; }
            .hero h1 { font-size: clamp(2.2rem, 5.5vw, 3.5rem); }
            .hero p.subtitle { font-size: clamp(1rem, 2.2vw, 1.15rem); }
        }

        @media (max-width: 768px) {
            html { font-size: 15px; }
            .container, .header-container { padding: 0 15px; }
            header { height: calc(var(--header-height) - 5px); }

            /* Mobile Navigation Styles */
            nav { position: absolute; top: calc(var(--header-height) - 5px); left: 0; width: 100%; background-color: rgba(0, 0, 0, 0.95); backdrop-filter: blur(15px); border-bottom: 1px solid var(--border-color); display: none; z-index: 999; max-height: calc(100vh - var(--header-height) + 5px); overflow-y: auto; }
            nav.active { display: block; }
            nav ul { flex-direction: column; align-items: center; padding: 1.5rem 0 2rem; gap: 0; }
            nav a { padding: 1rem 0; width: 100%; text-align: center; font-size: 1.1rem; color: var(--text-color); }
            nav a:hover, nav a.active-link { background-color: rgba(0, 255, 255, 0.1); color: var(--accent-color); }
            .mobile-menu { display: flex; }

            .hero { min-height: 80vh; padding-bottom: 30px; }
            .hero h1 { font-size: clamp(2rem, 7vw, 3rem); }
            .hero p.subtitle { font-size: clamp(0.95rem, 3vw, 1.1rem); }

             /* Adjust carousel variables for small screens */
              :root {
                --card-width: 280px;
                --card-height: 420px;
                --card-visual-height: 160px;
             }
             .carousel-scene {
                 max-width: var(--card-width);
                 height: calc(var(--card-height) + 30px);
                 perspective: 900px; /* Less perspective */
                 margin: 2rem auto;
            }
             .carousel-nav { width: 40px; height: 40px; font-size: 1rem; }
             .carousel-nav.prev { left: -25px; } /* Bring buttons closer */
             .carousel-nav.next { right: -25px; }


            .contact-form-element { max-width: 100%; }
            section { padding: 4rem 0; }
            .section-title { margin-bottom: 2.5rem; }
            .section-container { padding: 2rem; }
        }

        @media (max-width: 576px) {
            html { font-size: 14.5px; }
            .hero { min-height: 75vh; padding-top: var(--header-height); }
            #hero-canvas-container { /* display: none; */ }
            .hero-btns { flex-direction: column; align-items: center; gap: 1rem; width: 100%; }
            .btn { width: 90%; max-width: 320px; padding: 0.8rem 1.5rem; }
            .section-title { font-size: 1.6rem; }
            .section-title::after { bottom: -10px; width: 40px; height: 2px;}
            section { padding: 3rem 0; }
            .section-container { padding: 1.5rem; }
            input[type="text"], input[type="email"], textarea { padding: 0.9rem 1rem; }

            /* Adjust carousel variables for extra small screens */
             :root {
                --card-width: 240px;
                --card-height: 380px;
                --card-visual-height: 140px;
             }
             .carousel-scene {
                 max-width: var(--card-width);
                 height: calc(var(--card-height) + 20px);
                 perspective: 700px;
            }
             .card-content { padding: 1rem; }
             .card-content h3 { font-size: 1.1rem; }
             .card-content p { font-size: 0.85rem; margin-bottom: 0.8rem;}
             .card-tech span { font-size: 0.7rem; padding: 0.2rem 0.6rem;}
             .btn-card-link { font-size: 0.8rem; padding: 0.5rem 1rem;}
             .carousel-nav.prev { left: -10px; } /* Position buttons closer */
             .carousel-nav.next { right: -10px; }
        }

    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">Tony Komforty</div>
            <nav>
                <ul>
                    <li><a href="#home">Home</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#portfolio">Portfolio</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </nav>
            <div class="mobile-menu">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </header>

    <section class="hero" id="home">
        <div id="hero-canvas-container"></div>
        <div class="hero-content">
             <h1>Hi, I'm <span >Tony Komforty</span>.<br>Frontend Developer <br>& <span >Creative Coder</span></h1>
             <p class="subtitle">I design and develop engaging, interactive web experiences where code meets creativity.</p>
            <div class="hero-btns">
                <a href="#portfolio" class="btn btn-primary">View My Work</a>
                <a href="#contact" class="btn btn-secondary">Get In Touch</a>
            </div>
        </div>
    </section>

    <section class="about" id="about">
        <div class="container">
            <div class="section-container">
                 <h2 class="section-title">About Me</h2>
                 <div class="about-layout">
                    <div id="about-image-container">
                         </div>
                    <div class="about-content">
                        <p>I'm a frontend developer with a passion for creating interactive web experiences that use code to blend art, music and touch.</p>
                        <p>My background in music and audio gives me a unique perspective on interactive web design. I love exploring creativity, testing technical boundaries, and pushing unique things out into the world.</p>
                        <p>From generative art and audio visualizers to interactive UI elements, I enjoy using modern web technologies to build beautiful and responsive interfaces.</p>
                        <div class="skills">
                            <span class="skill-tag">HTML5</span>
                            <span class="skill-tag">CSS3</span>
                            <span class="skill-tag">JavaScript</span>
                            <span class="skill-tag">React</span>
                            <span class="skill-tag">p5.js</span>
                            <span class="skill-tag">Three.js</span>
                            <span class="skill-tag">tone.js</span>
                            <span class="skill-tag">Web Audio API</span>
                            <span class="skill-tag">GLSL</span>
                            <span class="skill-tag">Responsive Design</span>
                            <span class="skill-tag">CSS Animation</span>
                            <span class="skill-tag">Git</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="portfolio" id="portfolio">
        <div class="container">
            <div class="section-container">
                <div class="portfolio-intro">
                    <h2 class="section-title">Selected Works</h2>
                    <p>A few interactive projects exploring creative coding with p5.js, Three.js, Tone.js, and shaders. Use the arrows to navigate.</p>
                </div>

                <div class="carousel-scene">
                    <div class="portfolio-carousel">
                        <div class="portfolio-card">
                            <div class="card-visual">
                                <img src="sonicField.png"
                                     alt="Sonic Field Project Preview"
                                     onerror="this.style.display='none'"> </div>
                            <div class="card-content">
                                <h3>Sonic Field</h3>
                                <p>Generative audio instrument triggered by user interaction.</p>
                                <div class="card-tech">
                                    <span>p5.js</span><span>tone.js</span><span>JS</span>
                                </div>
                                <a href="https://tkomforty.github.io/sonicField/" target="_blank" rel="noopener noreferrer" class="btn btn-card-link">View Project</a>
                            </div>
                        </div>
                        <div class="portfolio-card">
                            <div class="card-visual">
                                 <img src="structGen.png"
                                     alt="Structure Generator Project Preview"
                                     onerror="this.style.display='none'">
                            </div>
                            <div class="card-content">
                                <h3>Structure Generator</h3>
                                <p>Procedural generation of pseudo-brutalist building structures.</p>
                                <div class="card-tech">
                                    <span>Three.js</span><span>JS</span>
                                </div>
                                <a href="https://tkomforty.github.io/brutalist/" target="_blank" rel="noopener noreferrer" class="btn btn-card-link">View Project</a>
                            </div>
                        </div>
                        <div class="portfolio-card">
                            <div class="card-visual">
                                 <img src="shaderWaves.png"
                                     alt="Shader Waves Project Preview"
                                     onerror="this.style.display='none'">
                            </div>
                            <div class="card-content">
                                <h3>Shader Waves</h3>
                                <p>Interactive WebGL wave shader with touch compatibility.</p>
                                <div class="card-tech">
                                    <span>WebGL</span><span>GLSL</span><span>JS</span>
                                </div>
                                <a href="https://tkomforty.github.io/shaderWaves/" target="_blank" rel="noopener noreferrer" class="btn btn-card-link">View Project</a>
                            </div>
                        </div>
                        <div class="portfolio-card">
                            <div class="card-visual">
                                 <img src="birdsFlock.png"
                                     alt="Bird Flocking Sim Project Preview"
                                     onerror="this.style.display='none'">
                            </div>
                            <div class="card-content">
                                <h3>Bird Flocking Sim</h3>
                                <p>Boids algorithm simulation with GLB assets and cloud generation.</p>
                                <div class="card-tech">
                                    <span>Three.js</span><span>GLB</span><span>JS</span>
                                </div>
                                <a href="https://tkomforty.github.io/birdsFlock/" target="_blank" rel="noopener noreferrer" class="btn btn-card-link">View Project</a>
                            </div>
                        </div>
                         </div><button class="carousel-nav prev" aria-label="Previous Project">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="carousel-nav next" aria-label="Next Project">
                        <i class="fas fa-chevron-right"></i>
                    </button>

                </div></div>
        </div>
    </section>

    <section class="contact" id="contact">
        <div class="container">
            <div class="section-container">
                <div style="text-align: center;">
                    <h2 class="section-title">Get In Touch</h2>
                </div>
                <form id="contact-form" class="contact-form-element" action="https://formspree.io/f/xblgzerp" method="POST">
                     <div class="form-group">
                         <label for="name">Name</label>
                         <input type="text" id="name" name="name" placeholder="Your Name" required>
                     </div>
                     <div class="form-group">
                         <label for="email">Email</label>
                         <input type="email" id="email" name="email" placeholder="your.email@example.com" required>
                     </div>
                     <div class="form-group">
                         <label for="message">Message</label>
                         <textarea id="message" name="message" rows="5" placeholder="Tell me about your project or just say hello!" required></textarea>
                     </div>
                     <button type="submit" class="btn btn-primary">Send Message</button>
                 </form>
                <div id="form-status"></div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p class="copyright">© <span id="year"></span> Tony Komforty. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // --- Core Site Functionality ---
        document.getElementById('year').textContent = new Date().getFullYear();
        const mobileMenuButton = document.querySelector('.mobile-menu');
        const nav = document.querySelector('nav');
        const navLinks = nav.querySelectorAll('a');
        if (mobileMenuButton && nav) { mobileMenuButton.addEventListener('click', (e) => { e.stopPropagation(); nav.classList.toggle('active'); const icon = mobileMenuButton.querySelector('i'); if (icon) { icon.classList.toggle('fa-bars'); icon.classList.toggle('fa-times'); } }); }
        navLinks.forEach(link => { link.addEventListener('click', function(e) { const targetId = this.getAttribute('href'); if (targetId && targetId.startsWith('#') && targetId.length > 1) { const targetElement = document.querySelector(targetId); if (targetElement) { e.preventDefault(); const headerOffset = document.querySelector('header')?.offsetHeight || 60; const elementPosition = targetElement.getBoundingClientRect().top; const offsetPosition = elementPosition + window.pageYOffset - headerOffset; window.scrollTo({ top: offsetPosition, behavior: 'smooth' }); if (nav.classList.contains('active')) { nav.classList.remove('active'); const icon = mobileMenuButton.querySelector('i'); if (icon) { icon.classList.remove('fa-times'); icon.classList.add('fa-bars'); } } } } }); });
        document.addEventListener('click', (e) => { if (nav && nav.classList.contains('active')) { if (!nav.contains(e.target) && !mobileMenuButton.contains(e.target)) { nav.classList.remove('active'); const icon = mobileMenuButton.querySelector('i'); if (icon) { icon.classList.remove('fa-times'); icon.classList.add('fa-bars'); } } } });
        const sectionsToObserve = document.querySelectorAll('.about, .portfolio, .contact');
        if ("IntersectionObserver" in window) { const sectionObserver = new IntersectionObserver((entries, observer) => { entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('fade-in-section'); observer.unobserve(entry.target); } }); }, { threshold: 0.1, rootMargin: "0px 0px -50px 0px" }); sectionsToObserve.forEach(section => { section.style.opacity = '0'; sectionObserver.observe(section); }); } else { sectionsToObserve.forEach(section => { section.style.opacity = 1; }); }
        const form = document.getElementById("contact-form"); const status = document.getElementById("form-status");
        async function handleSubmit(event) { event.preventDefault(); const data = new FormData(event.target); status.innerHTML = 'Sending...'; status.style.color = 'var(--text-secondary-color)'; status.style.opacity = '1'; try { const response = await fetch(event.target.action, { method: form.method, body: data, headers: { 'Accept': 'application/json' } }); if (response.ok) { status.innerHTML = "Message sent successfully!"; status.style.color = "var(--accent-color)"; form.reset(); setTimeout(() => { status.style.opacity = '0'; setTimeout(() => { status.innerHTML = ''; }, 300); }, 5000); } else { const responseData = await response.json().catch(() => ({})); let errorMessage = "Oops! There was a problem."; if (responseData && responseData.errors) { errorMessage = responseData.errors.map(error => error.message).join(", "); } else if (response.statusText) { errorMessage = `Error: ${response.statusText}`; } status.innerHTML = errorMessage; status.style.color = "#FF6B6B"; } } catch (error) { console.error("Form submission error:", error); status.innerHTML = "Network error. Please try again."; status.style.color = "#FF6B6B"; } }
        if (form && status) { form.addEventListener("submit", handleSubmit); } else { console.warn("Contact form or status element not found."); }

        // --- Portfolio Carousel Logic ---
        document.addEventListener('DOMContentLoaded', () => {
            const carousel = document.querySelector('.portfolio-carousel');
            const cards = carousel ? carousel.querySelectorAll('.portfolio-card') : [];
            const prevButton = document.querySelector('.carousel-nav.prev');
            const nextButton = document.querySelector('.carousel-nav.next');

            if (!carousel || cards.length === 0 || !prevButton || !nextButton) {
                console.warn('Carousel elements not found, skipping initialization.');
                if(prevButton) prevButton.style.display = 'none'; if(nextButton) nextButton.style.display = 'none';
                return;
            }

            const numCards = cards.length;
            if (numCards === 0) return; // Exit if no cards found

            const theta = 360 / numCards;
            let currentAngle = 0;
            let radius = 0;
            let cardWidth = 0; // Store cardWidth globally in this scope

            function calculateRadius() {
                 // Use computed style to get width respecting CSS variables potentially
                const computedStyle = window.getComputedStyle(cards[0]);
                cardWidth = parseFloat(computedStyle.width);
                if (cardWidth > 0 && numCards > 0) {
                     radius = Math.round((cardWidth / 2) / Math.tan(Math.PI / numCards));
                     return true; // Calculation successful
                }
                console.warn("Could not calculate radius - card width or numCards invalid.");
                return false; // Calculation failed
            }

            function positionCards() {
                if (!calculateRadius()) return; // Stop if radius calculation fails

                cards.forEach((card, index) => {
                    const angle = theta * index;
                    card.style.transform = `rotateY(${angle}deg) translateZ(${radius}px)`;
                    card.classList.toggle('is-front', index === 0); // Mark first card initially
                });
                rotateCarousel(); // Apply initial carousel rotation
            }

             function rotateCarousel() {
                 if (radius === 0) { // Ensure radius is calculated
                     if (!calculateRadius()) return;
                 }
                carousel.style.transform = `translateZ(${-radius}px) rotateY(${currentAngle}deg)`;
                 const currentCardIndex = Math.round(-currentAngle / theta) % numCards;
                 const frontIndex = (currentCardIndex < 0) ? numCards + currentCardIndex : currentCardIndex;
                 cards.forEach((card, index) => {
                     card.classList.toggle('is-front', index === frontIndex);
                 });
            }

            prevButton.addEventListener('click', () => { currentAngle += theta; rotateCarousel(); });
            nextButton.addEventListener('click', () => { currentAngle -= theta; rotateCarousel(); });

            // Debounce function
            function debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            };

             // Use requestAnimationFrame for initial positioning
             requestAnimationFrame(positionCards);

             // Recalculate on resize using debounce
             const debouncedResizeHandler = debounce(() => {
                 console.log("Resizing carousel...");
                 requestAnimationFrame(positionCards);
             }, 250); // Adjust debounce delay as needed

             window.addEventListener('resize', debouncedResizeHandler);

        });
        // --- End Portfolio Carousel Logic ---

    </script>

    <script>
        // --- p5.js Sketches ---
        const heroSketch = function(p) {
            let pointStructures = []; const numStructures = 2; let mousePos = {x: 0, y: 0, active: false}; let canvas; let mouseInactiveTimeout; let container;
            class PointStructure { constructor(offsetXRatio, offsetYRatio, colorPalette) { this.initialOffsetXRatio = offsetXRatio; this.initialOffsetYRatio = offsetYRatio; this.centerX = (p.width || window.innerWidth) * (0.5 + offsetXRatio); this.centerY = (p.height || window.innerHeight) * (0.5 + offsetYRatio); this.targetX = this.centerX; this.targetY = this.centerY; this.points = []; this.followSpeed = p.random(0.06, 0.1); this.connectionRadius = p.min(p.width, p.height) * 0.15; this.primaryColor = p.color(colorPalette.primary); this.accentColor = p.color(colorPalette.accent); this.highlightColor = p.color(colorPalette.highlight); const numPoints = p.floor(p.random(25, 40)); for (let i = 0; i < numPoints; i++) { const angle = p.random(p.TWO_PI); const baseRadius = p.random(p.min(p.width, p.height) * 0.05, p.min(p.width, p.height) * 0.2); const x = this.centerX + baseRadius * p.cos(angle); const y = this.centerY + baseRadius * p.sin(angle); this.points.push({ pos: p.createVector(x, y), vel: p5.Vector.random2D().mult(p.random(0.5, 1.5)), basePos: p.createVector(baseRadius * p.cos(angle), baseRadius * p.sin(angle)), size: p.random(1.5, 5), independenceLevel: p.random(0.4, 0.9), color: p.lerpColor(p.lerpColor(this.primaryColor, this.accentColor, p.random(0.7)), this.highlightColor, p.random() > 0.9 ? p.random(0.5, 1) : 0), phase: p.random(p.TWO_PI), noiseOffsetX: p.random(1000), noiseOffsetY: p.random(2000) }); } }
                update(time, mouseX, mouseY, mouseActive) { if(p.width <=0 || p.height <=0) return; let targetXActual, targetYActual; if (mouseActive) { targetXActual = mouseX; targetYActual = mouseY; } else { const driftStrength = 50; const noiseX = p.map(p.noise(time * 0.1 + this.noiseOffsetX), 0, 1, -driftStrength, driftStrength); const noiseY = p.map(p.noise(time * 0.1 + this.noiseOffsetY), 0, 1, -driftStrength, driftStrength); targetXActual = p.width / 2 + (p.width * this.initialOffsetXRatio) + noiseX; targetYActual = p.height / 2 + (p.height * this.initialOffsetYRatio) + noiseY; } this.targetX = p.lerp(this.targetX, targetXActual, this.followSpeed * (mouseActive ? 1.5 : 0.2)); this.targetY = p.lerp(this.targetY, targetYActual, this.followSpeed * (mouseActive ? 1.5 : 0.2)); const dx = this.targetX - this.centerX; const dy = this.targetY - this.centerY; this.centerX += dx * this.followSpeed * 0.8; this.centerY += dy * this.followSpeed * 0.8; for (let point of this.points) { const idealX = this.centerX + point.basePos.x; const idealY = this.centerY + point.basePos.y; const t = time * 0.3 * point.independenceLevel; const noiseStrength = 4 * point.independenceLevel; const noiseX = p.map(p.noise(point.noiseOffsetX + t), 0, 1, -noiseStrength, noiseStrength); const noiseY = p.map(p.noise(point.noiseOffsetY + t), 0, 1, -noiseStrength, noiseStrength); point.vel.add(noiseX * 0.1, noiseY * 0.1); const toIdeal = p.createVector(idealX - point.pos.x, idealY - point.pos.y); const tetherStrength = 0.015 * (1 - point.independenceLevel * 0.5); toIdeal.mult(tetherStrength); point.vel.add(toIdeal); point.vel.limit(2.5 + point.independenceLevel * 2); point.pos.add(point.vel); point.vel.mult(0.94); const bounceFactor = -0.5; if (point.pos.x < 0 || point.pos.x > p.width) { point.pos.x = p.constrain(point.pos.x, 0, p.width); point.vel.x *= bounceFactor; } if (point.pos.y < 0 || point.pos.y > p.height) { point.pos.y = p.constrain(point.pos.y, 0, p.height); point.vel.y *= bounceFactor; } } }
                draw(time) { this.connectionRadius = p.min(p.width, p.height) * 0.12; p.strokeWeight(0.5); for (let i = 0; i < this.points.length; i++) { for (let j = i + 1; j < this.points.length; j++) { const p1 = this.points[i].pos; const p2 = this.points[j].pos; const d = p.dist(p1.x, p1.y, p2.x, p2.y); if (d < this.connectionRadius) { const alpha = p.map(d, 0, this.connectionRadius, 60, 0); const lineColor = p.lerpColor(this.points[i].color, this.points[j].color, 0.5); p.stroke(lineColor.levels[0], lineColor.levels[1], lineColor.levels[2], alpha); p.line(p1.x, p1.y, p2.x, p2.y); } } } p.noStroke(); for (let point of this.points) { const pulsingSize = point.size * (0.9 + 0.2 * p.sin(time * 2 + point.phase)); p.fill(point.color); p.circle(point.pos.x, point.pos.y, pulsingSize); } }
                 resetPosition(newWidth, newHeight) { this.centerX = newWidth * (0.5 + this.initialOffsetXRatio); this.centerY = newHeight * (0.5 + this.initialOffsetYRatio); this.targetX = this.centerX; this.targetY = this.centerY; this.connectionRadius = p.min(newWidth, newHeight) * 0.15; for (let point of this.points) { const currentBaseMagnitude = point.basePos.mag(); const scaleFactor = p.min(newWidth, newHeight) / 1000; const newBaseMagnitude = p.max(20, currentBaseMagnitude * scaleFactor); point.basePos.setMag(newBaseMagnitude); point.pos.x = this.centerX + point.basePos.x; point.pos.y = this.centerY + point.basePos.y; point.vel.set(p5.Vector.random2D().mult(p.random(0.1, 0.5))); } }
            } // End PointStructure Class
            p.setup = function() { container = document.getElementById('hero-canvas-container'); if (!container || container.offsetWidth <= 0) { console.warn("Hero canvas container not ready/hidden."); p.noCanvas(); return; } try { canvas = p.createCanvas(container.offsetWidth, container.offsetHeight); canvas.parent(container); canvas.style('display', 'block'); } catch (e) { console.error("Error creating hero canvas:", e); p.noCanvas(); return; } const palette1 = { primary: '#00FFFF', accent: '#E0E0E0', highlight: '#33FFAA' }; const palette2 = { primary: '#CCCCCC', accent: '#00BFFF', highlight: '#FFFFFF' }; pointStructures = []; pointStructures.push(new PointStructure(-0.15, -0.1, palette1)); pointStructures.push(new PointStructure(0.15, 0.1, palette2)); mousePos.x = p.width / 2; mousePos.y = p.height / 2; const eventTarget = window; eventTarget.addEventListener('mousemove', (e) => { mousePos.x = p.constrain(e.clientX, 0, p.width); mousePos.y = p.constrain(e.clientY, 0, p.height); mousePos.active = true; if (mouseInactiveTimeout) clearTimeout(mouseInactiveTimeout); mouseInactiveTimeout = setTimeout(() => { mousePos.active = false; }, 1500); }); p.frameRate(30); };
            p.draw = function() { if (!canvas || !p.width || p.width <= 0 || !p.height || p.height <= 0) return; try { p.clear(); const time = p.millis() * 0.0008; for (let structure of pointStructures) { structure.update(time, mousePos.x, mousePos.y, mousePos.active); structure.draw(time); } } catch (e) { console.error("Error in hero draw loop:", e); p.noLoop(); } };
            p.windowResized = function() { if (!container) return; const currentWidth = container.offsetWidth; const currentHeight = container.offsetHeight; if (currentWidth > 0 && currentHeight > 0) { if (canvas) { p.resizeCanvas(currentWidth, currentHeight); console.log("Hero canvas resized:", currentWidth, currentHeight); for (let structure of pointStructures) { structure.resetPosition(p.width, p.height); } mousePos.x = p.width / 2; mousePos.y = p.height / 2; mousePos.active = false; if (mouseInactiveTimeout) clearTimeout(mouseInactiveTimeout); } else { console.log("Hero container resized, attempting setup again."); p.setup(); } } else { console.warn("Hero container resize zero dimensions."); } };
        }; // End heroSketch
        const generativeAboutSketch = function(p) {
            let particles = []; const maxParticles = 150; const particlesPerFrame = 1; let canvas; let container; let baseHue;
            class Particle { constructor() { this.pos = p.createVector(p.width / 2 + p.random(-10, 10), p.height / 2 + p.random(-10, 10)); this.vel = p5.Vector.random2D().mult(p.random(0.5, 1.5)); this.acc = p.createVector(0, 0); this.maxLifespan = p.random(100, 250); this.lifespan = this.maxLifespan; this.size = p.random(1.5, 4); this.hue = baseHue + p.random(-10, 10); this.sat = p.random(70, 100); this.bri = p.random(80, 100); this.noiseOffsetX = p.random(1000); this.noiseOffsetY = p.random(2000); }
                isDead() { return this.lifespan <= 0; } applyForce(force) { this.acc.add(force); }
                applyNoiseField(time) { let noiseScale = 0.005; let noiseStrength = 0.08; let angle = p.noise(this.pos.x * noiseScale + this.noiseOffsetX, this.pos.y * noiseScale + this.noiseOffsetY, time * 0.1) * p.TWO_PI * 2; let noiseForce = p5.Vector.fromAngle(angle); noiseForce.mult(noiseStrength); this.applyForce(noiseForce); }
                update(time) { this.lifespan -= 1; this.applyNoiseField(time); this.vel.add(this.acc); this.vel.limit(2); this.pos.add(this.vel); this.acc.mult(0); this.vel.mult(0.99); }
                display() { let alpha = p.map(this.lifespan, 0, this.maxLifespan, 0, 200); let currentBri = p.map(this.lifespan, 0, this.maxLifespan, 0, this.bri); p.noStroke(); p.fill(this.hue, this.sat, currentBri, alpha); p.ellipse(this.pos.x, this.pos.y, this.size, this.size); }
            } // End Particle Class
            p.setup = function() { container = document.getElementById('about-image-container'); if (!container || container.offsetWidth <= 0) { console.warn("About container not ready/hidden."); p.noCanvas(); return; } const containerWidth = container.offsetWidth; const containerHeight = container.offsetHeight; try { canvas = p.createCanvas(containerWidth, containerHeight); canvas.parent(container); canvas.style('display', 'block'); console.log("Generative About canvas created:", containerWidth, containerHeight); } catch(e) { console.error("Error creating generative About canvas:", e); p.noCanvas(); return; } p.colorMode(p.HSB, 360, 100, 100, 255); const accentColorCSS = getComputedStyle(document.documentElement).getPropertyValue('--accent-color').trim(); try { let tempColor = p.color(accentColorCSS); baseHue = p.hue(tempColor); if (isNaN(baseHue)) throw new Error("Parsed hue is NaN"); } catch (e) { console.warn("Could not parse accent color CSS variable for hue, using default (180 - Cyan). Error:", e); baseHue = 180; } particles = []; p.background(0); };
            p.draw = function() { if (!canvas || p.width <= 0 || p.height <= 0) return; try { const time = p.millis() * 0.001; p.background(0, 25); if (particles.length < maxParticles) { for(let i = 0; i < particlesPerFrame; i++) { particles.push(new Particle()); } } for (let i = particles.length - 1; i >= 0; i--) { particles[i].update(time); particles[i].display(); if (particles[i].isDead()) { particles.splice(i, 1); } } } catch (e) { console.error("Error in generative About draw loop:", e); p.noLoop(); } };
            p.windowResized = function() { if (!container) return; const containerWidth = container.offsetWidth; if (containerWidth <= 0) { console.warn("About container resize zero width."); return; } const containerHeight = container.offsetHeight; if (canvas) { p.resizeCanvas(containerWidth, containerHeight); console.log("Generative About canvas resized:", containerWidth, containerHeight); p.background(0); particles = []; } else { console.log("About container resized, attempting setup again."); p.setup(); } };
        }; // End generativeAboutSketch
         function initSketches() { console.log("Attempting to initialize p5 sketches..."); let heroInitialized = false; let aboutInitialized = false; try { const heroContainer = document.getElementById('hero-canvas-container'); if (heroContainer && heroContainer.offsetWidth > 0 && window.getComputedStyle(heroContainer).display !== 'none') { console.log("Initializing hero sketch."); new p5(heroSketch); heroInitialized = true; } else { console.log("Hero sketch container not found/hidden."); } } catch (e) { console.error("Error initializing hero sketch:", e); } try { const aboutContainer = document.getElementById('about-image-container'); if (aboutContainer && aboutContainer.offsetWidth > 0 && window.getComputedStyle(aboutContainer).display !== 'none') { console.log("Initializing NEW generative about sketch."); new p5(generativeAboutSketch); aboutInitialized = true; } else { console.log("About sketch container not found/hidden."); } } catch (e) { console.error("Error initializing generative about sketch:", e); } if (!heroInitialized && !aboutInitialized) { console.warn("Neither p5 sketch was initialized."); } }
         if (document.readyState === 'loading') { document.addEventListener('DOMContentLoaded', () => { requestAnimationFrame(initSketches); }); } else { requestAnimationFrame(initSketches); }

    </script>

</body>
</html>
